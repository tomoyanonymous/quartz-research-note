#obsidian

- 元々のブログもあるけど、あっちは研究用というよりも、公開して読み物として読んでもらうことを前提にしていて、ちょっと気軽に使いづらい
- 日付でソートされる必要のないノートがいい（項目ごとに随時アップデートされる）
- セミオープンなScrapboxとか、HackMD的なやつをセルフホストしたい
- なるべくファイルベースの管理がいい

- 自分で管理するWebサイト大体全部Hugoでデプロイしてるので結局Hugoが楽

- 現状[[Quartz]]という[[Obsidian]]で書いたものをなるべくそのまま~~[[Hugo]]でビルドして~~(⇨v4でHugoじゃなくなった)Github Pagesに公開できる仕組みを使っている
- ただし公開の方法はブランチからの公開ではなく最近できた[公式のAction](https://docs.github.com/ja/pages/getting-started-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0-github-actions-%E3%83%AF%E3%83%BC%E3%82%AF%E3%83%95%E3%83%AD%E3%83%BC%E3%81%AB%E3%82%88%E3%82%8B%E5%85%AC%E9%96%8B)を使うよう自力で改造している
- これのせいか知らんけど最終編集時刻の反映が上手くいってない
    - もしかするとシングルファイルのコミットのみが反映されてたりするのかも?
    - →違った、ファイル名が日本語だとダメっぽい
    - CIで`git config --global core.quotepath false`実行する必要あり
        - https://github.com/gohugoio/hugo/issues/9810#issuecomment-1107519804
- 治った。まだBacklinkが時々おかしい
	- これは相対リンクがHugoとしては生きるけど、Hugo-Obsidianでは生きないから、ということみたい。常にVaultルートからのフルパスで書く必要がある
- あとなんかi18nも反映されてない

## メモの取り方

 - obsidian-gitの定時backupを基本的に利用
	 - 定時の間隔は一応1時間に1回。作業場所変える時はコマンドパレットから手動でbackupコマンド実行してpushするようにしてる
 - 人に読まれることを目標にはしないが、人に読まれるかもしれないという状況を作っておくこと自体が一定レベルでメモをわかりやすくすることに貢献してくれる

### 意識的にやらないようにしていること

Webサイトとの運用方針の違い。

- ファイルを階層化しない
	- リンクとタグで完結させる
- *意味のある単位でコミットを打たない*
	- Gitとしての思想は捨て、自動同期ツールとして割り切る
- *URLのユニーク性、永続性を担保しない*
	- タイトル＝ファイル名を書き換えるとURLも全部変わるけど諦める
 - 記事のアップデート差分を保持しない
	 - 履歴が見たければGitのログを見ろ
	 - ただ、理想的にはScrapboxみたくどの部分をどのくらい最近アップデートしたかがわかるくらいはあってもいいかも

## 運用方法

### 記事の粒度

とりあえずそこまで気を使わなくても良さそう。ただしGithub Pagesに公開する時には空のリンクは404になってしまうので、二つ以上の記事から参照されている単語に関しては中身空でいいので記事を作っておくこと

### フロントマッター

~~残念ながら`title`が設定されていないと相互リンクに支障が出るので、ファイル名と同一になるように手動でつける。~~
→~~パーセントエンコーディングの修正したら治ったのでいらないっぽい~~[[Quartz#難点]]
~~→タグとかで検索した時にタイトルが表示されないのでやっぱ必要。~~

~~タグは手動でフロントマッターにつける。~~

v4以降不要。obsidianで表示できるものは基本全て表示できる

### 階層分けについて

~~相対リンクがHugo-Obsidianでうまく動かないこともあるため、ファイル単位ではなるべくしない方針。つまり基本全部ルートフォルダに置く。~~

見やすい一覧ページが必要なら一覧用のページを別途立ち上げること。

- どうしても階層構造が必要ならタグをスラッシュ区切りにするとかで解決するのがいい気がする。
	- ~~→これも[[Hugo]]のタグ機能が対応してないんでやめた方がいい。たとえば`#tools/software`というタグを作るぐらいなら`tools`と`software`それぞれタグ付けする~~

	
このへんもv4でHugo消えてから特に気にする必要ないはず。タグのページも階層分け含めきちんと生成されている。

[Tag Listing](https://quartz.jzhao.xyz/features/folder-and-tag-listings#tag-listings)

タグの一覧ページにdescriptionをつけたい場合は`tags/hogehoge/fuga.md`という記事を作れば`#hogehoge/fuga`の一覧ページの先頭に反映されるっぽい

### [[Zotero]]から論文を読み込む

[[論文の管理]]参照

---

最終的にはセルフホストのサーバーの方に移動しようかなー


